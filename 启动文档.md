# 主义主义机 (Ismism Machine) 启动文档

本文档详细说明如何在不同操作系统和环境中启动"主义主义机"项目。

## 目录

1. [环境要求](#环境要求)
2. [Windows系统启动](#windows系统启动)
3. [MacOS/Linux系统启动](#macoslinux系统启动)
4. [使用Docker启动](#使用docker启动)
5. [常见问题](#常见问题)

## 环境要求

### 基本环境

- **Node.js**: v18.12.1或更高版本
- **npm**: v8.0.0或更高版本
- **浏览器**: 推荐使用Chrome、Firefox、Edge最新版本

### Docker环境（可选）

- **Docker**: 20.10.0或更高版本
- **Docker Compose**: v2.0.0或更高版本

## Windows系统启动

### 方法一：使用集成脚本(推荐)

1. 双击项目根目录中的`install.bat`文件
2. 在菜单中选择"1"（安装依赖并启动开发环境）
3. 等待依赖安装完成，开发服务器会自动启动
4. 浏览器会自动打开 http://localhost:5173

```
注意：如果浏览器没有自动打开，请手动访问 http://localhost:5173
```

### 方法二：使用命令行

1. 打开命令提示符或PowerShell
2. 导航到项目根目录
3. 运行以下命令：

```cmd
:: 安装依赖
npm install

:: 启动开发服务器
npm run dev
```

## MacOS/Linux系统启动

### 方法一：使用集成脚本(推荐)

1. 打开终端
2. 导航到项目根目录
3. 赋予脚本执行权限并运行：

```bash
# 赋予执行权限
chmod +x setup.sh

# 运行脚本
./setup.sh
```

4. 在菜单中选择"1"（安装依赖并启动开发环境）
5. 等待依赖安装完成，开发服务器会自动启动
6. 在浏览器中访问 http://localhost:5173

### 方法二：使用命令行

1. 打开终端
2. 导航到项目根目录
3. 运行以下命令：

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

## 使用Docker启动

### 开发环境

无需本地安装Node.js，使用Docker容器启动开发环境：

#### Windows系统

1. 确保已安装Docker Desktop并运行
2. 双击项目根目录中的`install.bat`文件
3. 在菜单中选择"4"（使用Docker启动开发环境）
4. 等待容器启动完成
5. 在浏览器中访问 http://localhost:5173

#### MacOS/Linux系统

1. 确保已安装Docker并运行
2. 在终端中导航到项目根目录
3. 运行脚本并选择Docker启动选项：

```bash
./setup.sh
# 在菜单中选择"4"
```

或直接运行Docker Compose命令：

```bash
docker-compose up
```

### 生产环境模拟

使用Docker构建生产镜像并运行：

#### Windows系统

1. 双击项目根目录中的`install.bat`文件
2. 在菜单中选择"5"（构建Docker镜像并运行）
3. 等待镜像构建和容器启动完成
4. 在浏览器中访问 http://localhost

#### MacOS/Linux系统

1. 在终端中导航到项目根目录
2. 运行脚本并选择构建Docker镜像选项：

```bash
./setup.sh
# 在菜单中选择"5"
```

或直接运行Docker命令：

```bash
# 构建镜像
docker build -t ismism-machine:latest .

# 运行容器
docker run -d -p 80:80 --name ismism-machine ismism-machine:latest
```

## 常见问题

### 1. 依赖安装失败

**问题**: 运行`npm install`时遇到依赖安装错误。

**解决方案**:
- 检查Node.js和npm版本是否符合要求
- 尝试清除npm缓存：`npm cache clean -f`
- 尝试使用yarn代替npm：`yarn install`
- 如果使用特定版本的Node.js：
  ```bash
  # nvm用户
  nvm use
  # 然后重新安装依赖
  npm install
  ```

### 2. 端口冲突

**问题**: 启动服务器时提示端口5173已被占用。

**解决方案**:
- 找到占用5173端口的进程并关闭
- 修改Vite配置使用其他端口：
  ```bash
  # 使用自定义端口启动
  npm run dev -- --port 3000
  ```

### 3. Docker相关问题

**问题**: Docker启动失败或无法访问。

**解决方案**:
- 确保Docker服务已启动
- 检查防火墙设置，确保允许相关端口通信
- 尝试重新构建镜像：
  ```bash
  docker-compose down
  docker-compose build --no-cache
  docker-compose up
  ```

### 4. 热更新不工作

**问题**: 修改代码后页面没有自动刷新。

**解决方案**:
- 检查是否启用了浏览器缓存
- 尝试重启开发服务器
- 检查文件系统监视限制(Linux系统)：
  ```bash
  # 增加文件监视限制
  echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf
  sudo sysctl -p
  ```

### 5. 找不到Node.js

**问题**: 系统提示找不到Node.js或npm命令。

**解决方案**:
- 确保Node.js已正确安装
- 检查环境变量是否正确配置
- 使用nvm或nodenv等版本管理工具：
  ```bash
  # 安装正确版本的Node.js
  nvm install 18.12.1
  nvm use 18.12.1
  ```

如需更多帮助，请参考项目文档或提交Issue到项目仓库。 