# 艺术主义机项目结构文档

## 项目概述

艺术主义机是一个可视化艺术思潮与流派的时间线工具，帮助用户探索和理解不同艺术运动之间的关系和发展历程。项目采用前后端分离架构，前端使用React+TypeScript开发，后端使用Node.js+Express+MongoDB开发。

## 技术栈

### 前端
- React
- TypeScript
- Material UI
- Tailwind CSS
- Zustand (状态管理)
- Axios (HTTP客户端)

### 后端
- Node.js
- Express
- MongoDB
- Mongoose (ODM)

## 重构后的项目结构

项目已经按照功能区分为前端、后端和数据库三个主要部分，并将文档集中管理。新的目录结构如下：

```
Ismism-Machine/
│
├── client/                       # 前端应用
│   ├── src/                      # 前端源代码目录
│   │   ├── api/                  # API请求模块
│   │   │   ├── axios.js          # Axios配置
│   │   │   ├── axios.ts          # TypeScript版Axios配置
│   │   │   ├── timelineApi.js    # 时间线API请求函数
│   │   │   └── timelineApi.ts    # TypeScript版时间线API请求函数
│   │   │
│   │   ├── components/           # React组件目录
│   │   │   ├── AICreateSection.tsx   # AI生成内容组件
│   │   │   ├── Counter.tsx           # 计数器组件
│   │   │   ├── DragDemo.tsx          # 拖拽演示组件
│   │   │   ├── DraggableDemo.tsx     # 可拖拽演示组件
│   │   │   ├── DraggableItem.tsx     # 可拖拽项目组件
│   │   │   └── DraggableNode.tsx     # 可拖拽节点组件
│   │   │
│   │   ├── store/                # 状态管理目录
│   │   │   └── timelineStore.ts  # 时间线状态管理
│   │   │
│   │   ├── styles/               # 样式文件目录
│   │   │   └── index.css         # 全局样式
│   │   │
│   │   ├── types/                # TypeScript类型定义
│   │   │
│   │   ├── App.jsx               # 应用主组件(JSX版本)
│   │   ├── App.tsx               # 应用主组件(TypeScript版本)
│   │   └── main.tsx              # 前端应用入口
│   │
│   ├── index.html                # HTML模板
│   ├── tailwind.config.js        # Tailwind配置
│   ├── tsconfig.json             # TypeScript配置
│   └── vite.config.ts            # Vite构建配置
│
├── server/                       # 后端应用
│   ├── config/                   # 配置目录
│   │   └── database.js           # 数据库连接配置
│   │
│   ├── controllers/              # 控制器目录
│   │   ├── artMovementController.js  # 艺术主义控制器
│   │   └── timelineController.js     # 时间线控制器
│   │
│   ├── models/                   # 数据模型目录
│   │   ├── ArtMovement.js        # 艺术主义数据模型
│   │   └── TimelineNode.js       # 时间线节点模型
│   │
│   ├── routes/                   # 路由目录
│   │   ├── artMovementRoutes.js  # 艺术主义路由
│   │   └── timeline.js           # 时间线路由
│   │
│   ├── app.js                    # 后端应用入口
│   └── server.js                 # 服务器入口文件
│
├── database/                     # 数据库相关
│   ├── scripts/                  # 数据库脚本
│   │   └── seedDatabase.js       # 数据库种子脚本
│   │
│   ├── database_connection_info.md   # 数据库连接信息
│   ├── database_integration_guide.md # 数据库集成指南
│   ├── database_import_steps.txt     # 数据库导入步骤
│   └── database_setup_guide.txt      # 数据库设置指南
│
├── docs/                         # 文档目录
│   ├── deployment.md             # 部署文档
│   ├── 启动文档.md                # 启动说明
│   ├── 工作计划.md                # 工作计划
│   ├── 技术文档.md                # 技术文档
│   └── 项目结构文档.md            # 本文档
│
├── docker-compose.yml            # Docker Compose配置
├── Dockerfile                    # Docker构建文件
├── nginx.conf                    # Nginx配置
└── package.json                  # 项目依赖配置
```

## 模块功能说明

### 前端模块 (client/)
- **src/api/** - 前端API请求模块，负责与后端通信
- **src/components/** - React组件目录，包含所有UI组件
  - **DraggableDemo.tsx** - 拖拽功能演示组件
  - **DraggableItem.tsx** - 可拖拽项目组件
  - **DraggableNode.tsx** - 可拖拽节点组件
- **src/store/** - 状态管理目录，使用Zustand管理应用状态
- **src/styles/** - 样式文件目录
- **src/types/** - TypeScript类型定义
- **src/App.tsx** - 应用主组件
- **src/main.tsx** - 应用入口文件

### 后端模块 (server/)
- **config/** - 配置目录，包含数据库连接配置
- **controllers/** - 控制器目录，处理请求逻辑
- **models/** - 数据模型目录，定义MongoDB模型结构
- **routes/** - 路由目录，管理API路由
- **app.js** - 后端应用入口
- **server.js** - 服务器入口文件

### 数据库模块 (database/)
- **scripts/seedDatabase.js** - 数据库种子脚本，用于初始化数据
- **database_connection_info.md** - 数据库连接信息文档
- **database_integration_guide.md** - 数据库集成指南
- **database_import_steps.txt** - 数据库导入步骤
- **database_setup_guide.txt** - 数据库设置指南

### 文档模块 (docs/)
- **deployment.md** - 部署文档
- **启动文档.md** - 启动说明
- **工作计划.md** - 工作计划
- **技术文档.md** - 技术文档
- **项目结构文档.md** - 项目结构文档

## 数据流向

1. 前端组件触发状态更新或API请求
2. API层发送请求到后端
3. 后端路由接收请求并转发到控制器
4. 控制器处理业务逻辑并与数据模型交互
5. 数据模型与MongoDB数据库交互
6. 控制器返回结果给前端
7. 前端更新状态并重新渲染UI

## 数据库接入点

### 后端接入点
- **数据库连接配置**: server/config/database.js
- **数据模型定义**: server/models/ArtMovement.js
- **API控制器**: server/controllers/artMovementController.js
- **API路由**: server/routes/artMovementRoutes.js

### 前端接入点
- **API服务**: client/src/api/目录，建议创建artMovementApi.ts
- **状态管理**: client/src/store/目录，建议创建artMovementStore.ts
- **组件集成**: client/src/components/目录中的各组件

## 开发工作流

1. 前端开发人员专注于client/src目录
2. 后端开发人员专注于server目录
3. 数据库开发人员专注于database目录和server/models目录
4. 通过API契约实现前后端协作
5. 使用Docker进行环境一致性保证

## 构建与部署

1. 前端构建: 在client目录下运行npm run build
2. 后端构建: 在server目录下运行npm run build (如果需要)
3. Docker部署: 使用根目录下的docker-compose.yml和Dockerfile

这种架构实现了前端、后端和数据库的清晰分离，同时保持了模块化结构，便于不同团队成员并行开发和维护。文档的集中管理也使项目更加易于理解和上手。 