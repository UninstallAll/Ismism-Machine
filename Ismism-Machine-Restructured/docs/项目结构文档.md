# 艺术主义机项目结构文档

## 项目概述

艺术主义机是一个可视化艺术思潮与流派的时间线工具，帮助用户探索和理解不同艺术运动之间的关系和发展历程。项目采用前后端分离架构，前端使用React+TypeScript开发，后端使用Node.js+Express+MongoDB开发。

## 技术栈

### 前端
- React
- TypeScript
- Material UI
- Tailwind CSS
- Zustand (状态管理)
- Axios (HTTP客户端)

### 后端
- Node.js
- Express
- MongoDB
- Mongoose (ODM)

## 模块功能说明

### 前端 (client/)
- **src/api/** - 前端API请求模块，负责与后端通信
- **src/components/** - React组件目录，包含所有UI组件
- **src/store/** - 状态管理目录，使用Zustand管理应用状态
- **src/styles/** - 样式文件目录，包含CSS和Tailwind样式
- **src/types/** - TypeScript类型定义，提供全局类型声明

### 后端 (server/)
- **src/controllers/** - 控制器目录，处理请求逻辑
- **src/models/** - 数据模型目录，定义MongoDB模型结构
- **src/routes/** - 路由目录，管理API路由
- **src/middlewares/** - 中间件目录（可扩展）

### 通用配置
- **config/** - 配置文件目录，包含前后端共享配置
- **docs/** - 文档目录，包含项目相关文档

## 项目结构图

```
Ismism-Machine-Restructured/
│
├── client/                       # 前端应用
│   ├── public/                   # 静态资源目录
│   ├── src/                      # 源代码目录
│   │   ├── api/                  # API请求模块
│   │   │   ├── axios.ts          # Axios配置和拦截器
│   │   │   └── timelineApi.ts    # 时间线API请求函数
│   │   │
│   │   ├── components/           # React组件目录
│   │   │   ├── AICreateSection.tsx    # AI生成内容组件
│   │   │   ├── GalleryGrid.tsx        # 画廊网格组件
│   │   │   ├── MainContent.tsx        # 主内容区组件
│   │   │   ├── Navbar.tsx             # 导航栏组件
│   │   │   ├── Sidebar.tsx            # 侧边栏组件
│   │   │   ├── StatsDisplay.tsx       # 数据统计组件
│   │   │   ├── Timeline.tsx           # 时间线主组件
│   │   │   └── TimelineView.tsx       # 时间线视图组件
│   │   │
│   │   ├── store/                # 状态管理目录
│   │   │   └── timelineStore.ts  # 时间线状态管理
│   │   │
│   │   ├── styles/               # 样式文件目录
│   │   │   └── index.css         # 全局样式
│   │   │
│   │   ├── types/                # TypeScript类型定义
│   │   │   └── index.ts          # 全局类型声明
│   │   │
│   │   ├── App.tsx               # 应用主组件
│   │   └── main.tsx              # 应用入口文件
│   │
│   ├── index.html                # HTML模板
│   ├── package.json              # 前端依赖配置
│   ├── tailwind.config.js        # Tailwind配置
│   ├── tsconfig.json             # TypeScript配置
│   └── vite.config.ts            # Vite构建配置
│
├── server/                       # 后端应用
│   ├── src/                      # 源代码目录
│   │   ├── controllers/          # 控制器目录
│   │   │   └── timelineController.js  # 时间线控制器
│   │   │
│   │   ├── models/               # 数据模型目录
│   │   │   └── TimelineNode.js   # 时间线节点模型
│   │   │
│   │   ├── routes/               # 路由目录
│   │   │   └── timeline.js       # 时间线路由
│   │   │
│   │   ├── config.js             # 后端配置文件
│   │   └── server.js             # 服务器入口文件
│   │
│   └── package.json              # 后端依赖配置
│
├── config/                       # 全局配置目录
│   └── nginx.conf                # Nginx配置文件
│
├── docs/                         # 文档目录
│   ├── deployment.md             # 部署文档
│   ├── 启动文档.md                # 启动说明
│   └── 技术文档.md                # 技术文档
│
├── docker-compose.yml            # Docker Compose配置
├── Dockerfile                    # Docker构建文件
├── package.json                  # 项目根依赖配置
└── README.md                     # 项目说明文档
```

## 核心模块说明

1. **用户界面层 (client/src/components/)**
   - 负责页面渲染和用户交互
   - 包含所有视图组件和UI元素
   - 主要组件:
     - `Navbar`: 顶部导航栏
     - `Sidebar`: 侧边栏筛选器
     - `MainContent`: 主要内容区域
     - `Timeline`: 时间线展示
     - `GalleryGrid`: 画廊网格视图
     - `AICreateSection`: AI创作工具

2. **状态管理层 (client/src/store/)**
   - 使用Zustand管理全局状态
   - 处理数据流和状态变化
   - 实现响应式更新

3. **API通信层 (client/src/api/)**
   - 处理前端与后端的通信
   - 封装所有API请求函数
   - 统一错误处理和响应转换

4. **后端业务逻辑层 (server/src/controllers/)**
   - 实现业务逻辑
   - 处理客户端请求
   - 返回统一的响应格式

5. **数据访问层 (server/src/models/)**
   - 定义数据模型
   - 负责与数据库交互
   - 实现数据验证和转换

6. **路由层 (server/src/routes/)**
   - 定义API路由
   - 将请求路由到对应控制器
   - 实现API版本控制

## 数据流向

1. 用户通过界面发起操作
2. 组件触发状态更新或API请求
3. API层发送请求到后端
4. 后端路由接收请求并转发到控制器
5. 控制器处理业务逻辑并与数据模型交互
6. 控制器返回结果给前端
7. 前端更新状态并重新渲染UI

## 开发工作流

1. 前端开发人员专注于client目录
2. 后端开发人员专注于server目录
3. 通过API契约实现前后端协作
4. 使用Docker进行环境一致性保证
5. 通过根目录的package.json脚本统一管理项目

这种架构实现了前后端的彻底分离，同时保持了清晰的模块化结构，便于不同团队成员并行开发和维护。 