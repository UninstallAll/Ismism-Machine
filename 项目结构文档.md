# 艺术主义机项目结构文档

## 项目概述

艺术主义机是一个可视化艺术思潮与流派的时间线工具，帮助用户探索和理解不同艺术运动之间的关系和发展历程。项目采用前后端分离架构，前端使用React+TypeScript+Material UI开发，后端使用Node.js+Express+MongoDB开发。

## 技术栈

### 前端
- React 18
- TypeScript
- Material UI (MUI) v5
- MUI Icons
- Zustand (状态管理)
- Axios (HTTP客户端)
- React Router DOM v6

### 后端
- Node.js
- Express
- MongoDB
- Mongoose (ODM)

## 当前项目结构

当前项目结构已经实现了前后端分离，并包含了数据库接入功能。主要目录结构如下：

```
Ismism-Machine/
│
├── src/                          # 源代码目录
│   ├── api/                      # API请求模块
│   │   ├── axios.js              # Axios配置
│   │   ├── axios.ts              # TypeScript版Axios配置
│   │   ├── timelineApi.js        # 时间线API请求函数
│   │   └── timelineApi.ts        # TypeScript版时间线API请求函数
│   │
│   ├── components/               # React组件目录
│   │   ├── AICreateSection.tsx   # AI生成内容组件
│   │   ├── GalleryGrid.tsx       # 画廊网格组件
│   │   ├── MainLayout.tsx        # 主布局组件
│   │   ├── SimpleNavbar.tsx      # 简易导航栏组件
│   │   ├── SimpleSidebarRouter.tsx # 简易侧边栏路由组件
│   │   ├── StatsDisplay.tsx      # 统计显示组件
│   │   ├── Timeline.tsx          # 时间线组件
│   │   ├── TimelineNode.tsx      # 时间线节点组件
│   │   └── TimelineView.tsx      # 时间线视图组件
│   │
│   ├── config/                   # 配置目录
│   │   └── database.js           # 数据库连接配置
│   │
│   ├── controllers/              # 控制器目录
│   │   └── artMovementController.js  # 艺术主义控制器
│   │
│   ├── data/                     # 数据目录
│   │   └── galleryImages.json    # 画廊图片数据
│   │
│   ├── models/                   # 数据模型目录
│   │   └── ArtMovement.js        # 艺术主义数据模型
│   │
│   ├── pages/                    # 页面组件目录
│   │   ├── AICreatePage.tsx      # AI创建页面
│   │   ├── GalleryPage.tsx       # 画廊页面
│   │   ├── StatsPage.tsx         # 统计页面
│   │   └── TimelinePage.tsx      # 时间线页面
│   │
│   ├── routes/                   # 路由目录
│   │   └── artMovementRoutes.js  # 艺术主义路由
│   │
│   ├── store/                    # 状态管理目录
│   │   └── timelineStore.ts      # 时间线状态管理
│   │
│   ├── styles/                   # 样式目录
│   │   └── layout.css            # 布局样式
│   │
│   ├── App.tsx                   # 应用主组件(TypeScript版本)
│   ├── app.js                    # 后端应用入口
│   ├── index.css                 # 全局样式
│   ├── main.tsx                  # 前端应用入口
│   └── timelineStore.ts          # 时间线状态管理(TS版本)
│
├── scripts/                      # 脚本目录
│   └── seedDatabase.js           # 数据库种子脚本
│
├── server/                       # 服务器目录
│   ├── controllers/              # 控制器目录
│   │   └── timelineController.js # 时间线控制器
│   ├── models/                   # 数据模型目录
│   │   └── TimelineNode.js       # 时间线节点模型
│   ├── routes/                   # 路由目录
│   │   └── timeline.js           # 时间线路由
│   └── server.js                 # 服务器入口文件
│
├── public/                       # 公共资源目录
│   ├── TestData/                 # 测试数据目录
│   └── manifest.json             # 应用清单
│
├── database/                     # 数据库相关文件
├── docs/                         # 文档目录
├── TestData/                     # 测试数据
├── dist/                         # 构建输出目录
│
├── database_connection_info.md   # 数据库连接信息文档
├── database_integration_guide.md # 数据库集成指南
├── database_import_steps.txt     # 数据库导入步骤
├── database_setup_guide.txt      # 数据库设置指南
├── deployment.md                 # 部署文档
├── docker-compose.yml            # Docker Compose配置
├── Dockerfile                    # Docker构建文件
├── index.html                    # HTML模板
├── nginx.conf                    # Nginx配置
├── package.json                  # 项目依赖配置
├── postcss.config.js             # PostCSS配置
├── tsconfig.json                 # TypeScript配置
├── tsconfig.node.json            # Node TypeScript配置
├── vite.config.ts                # Vite构建配置
├── 启动文档.md                   # 启动说明
├── 工作计划.md                   # 工作计划
├── 技术文档.md                   # 技术文档
└── README.md                     # 项目说明
```

## 模块功能说明

### 前端模块
- **src/api/** - 前端API请求模块，负责与后端通信
- **src/components/** - React组件目录，包含所有UI组件
  - **GalleryGrid.tsx** - 画廊网格组件，展示艺术作品
  - **MainLayout.tsx** - 主布局组件，提供应用整体布局结构
  - **SimpleNavbar.tsx** - 简易导航栏组件，提供导航功能
  - **SimpleSidebarRouter.tsx** - 简易侧边栏路由组件，提供侧边导航
  - **Timeline.tsx** - 时间线组件，展示艺术主义发展历程
  - **TimelineNode.tsx** - 时间线节点组件，表示单个艺术主义
- **src/pages/** - 页面组件目录，包含所有页面级组件
  - **GalleryPage.tsx** - 画廊页面，展示艺术作品集合
  - **StatsPage.tsx** - 统计页面，展示数据统计和分析
  - **TimelinePage.tsx** - 时间线页面，展示艺术主义发展历程
  - **AICreatePage.tsx** - AI创建页面，提供AI生成内容功能
- **src/data/** - 数据目录，包含静态数据文件
  - **galleryImages.json** - 画廊图片数据，包含艺术作品信息
- **src/store/** - 状态管理目录，使用Zustand管理应用状态
- **src/styles/** - 样式目录，包含全局和模块化样式
- **src/App.tsx** - 应用主组件，包含MUI主题配置
- **src/main.tsx** - 应用入口文件

### 后端模块
- **src/config/** - 配置目录，包含数据库连接配置
- **src/controllers/** - 控制器目录，处理请求逻辑
- **src/models/** - 数据模型目录，定义MongoDB模型结构
- **src/routes/** - 路由目录，管理API路由
- **src/app.js** - 后端应用入口
- **scripts/seedDatabase.js** - 数据库种子脚本，用于初始化数据

### 数据库模块
- **src/models/ArtMovement.js** - 艺术主义数据模型
- **src/controllers/artMovementController.js** - 艺术主义控制器
- **src/routes/artMovementRoutes.js** - 艺术主义路由
- **scripts/seedDatabase.js** - 数据库种子脚本

## MUI主题配置

项目使用了增强的Material UI主题，实现了瑞士国际主义设计风格：

```typescript
// 瑞士国际主义风格设计主题
let swissTheme = createTheme({
  palette: {
    mode: 'light',
    primary: {
      main: '#000000',
      light: '#333333',
      dark: '#000000',
      contrastText: '#ffffff',
    },
    secondary: {
      main: '#FF3B30',
      light: '#FF6B61',
      dark: '#CC2F26',
      contrastText: '#ffffff',
    },
    // 其他调色板配置...
  },
  typography: {
    fontFamily: ['Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif'].join(','),
    // 字体配置...
  },
  shape: { 
    borderRadius: 0 // 无圆角设计
  },
  components: {
    // 组件样式覆盖...
  },
});

// 应用响应式字体大小
swissTheme = responsiveFontSizes(swissTheme);
```

主题特点：
- 黑白为主色调，红色作为强调色
- 无圆角设计（borderRadius: 0）
- Helvetica字体家族
- 响应式字体大小
- 自定义滚动条样式
- 统一的组件样式覆盖，包括按钮、卡片、对话框等

## 数据结构

### 画廊数据 (galleryImages.json)
```json
{
  "id": "artwork-1",
  "title": "星夜",
  "artist": "文森特·梵高",
  "year": 1889,
  "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Van_Gogh_-_Starry_Night_-_Google_Art_Project.jpg/1200px-Van_Gogh_-_Starry_Night_-_Google_Art_Project.jpg",
  "style": "后印象派",
  "description": "《星夜》是文森特·梵高于1889年创作的后印象派杰作，展现了艺术家独特的视角和创作风格，是梵高最著名的作品之一。"
}
```

## 设计风格

项目采用瑞士国际主义设计风格：
- 黑白为主色调
- 红色作为强调色
- 无圆角设计
- Helvetica 字体家族
- 简洁的排版和布局
- 网格系统布局
- 一致的间距和对齐
- 强调排版层次结构
- 简洁的动画效果

## 数据流向

1. 前端组件触发状态更新或API请求
2. API层发送请求到后端
3. 后端路由接收请求并转发到控制器
4. 控制器处理业务逻辑并与数据模型交互
5. 数据模型与MongoDB数据库交互
6. 控制器返回结果给前端
7. 前端更新状态并重新渲染UI

## 数据库接入点

### 后端接入点
- **数据库连接配置**: src/config/database.js
- **数据模型定义**: src/models/ArtMovement.js
- **API控制器**: src/controllers/artMovementController.js
- **API路由**: src/routes/artMovementRoutes.js

### 前端接入点
- **API服务**: src/api/timelineApi.ts
- **状态管理**: src/timelineStore.ts
- **组件集成**: 在各个需要使用艺术主义数据的组件中集成

## 重构说明

项目已完成以下重构：
1. 从Tailwind CSS迁移到Material UI (MUI)，采用瑞士国际主义设计风格
2. 删除了不必要的组件：
   - MainContent.tsx
   - Navbar.tsx
   - DraggableItem.tsx
   - DraggableDemo.tsx
   - DragDemo.tsx
   - DraggableNode.tsx
   - App.jsx
   - ModernNavbar.tsx
3. 优化了项目结构，分离页面组件和UI组件
4. 统一了样式系统，使用MUI主题
5. 修复了版本兼容性问题：
   - 降级安装了兼容版本的MUI组件库 (v5)
   - 解决了React Router DOM版本兼容问题
6. 修复了图片路径问题：
   - 添加了图片路径处理函数
   - 更新了画廊数据使用网络图片
7. 增强了MUI主题配置：
   - 添加了更多组件样式覆盖
   - 实现了响应式字体大小
   - 优化了交互动效
   - 自定义了滚动条样式

## 开发工作流

1. 前端开发人员专注于src/components、src/pages、src/api和src/store目录
2. 后端开发人员专注于src/controllers、src/models和src/routes目录
3. 通过API契约实现前后端协作
4. 使用Docker进行环境一致性保证
5. 通过package.json脚本统一管理项目

这种架构实现了前后端的分离，同时保持了清晰的模块化结构，便于不同团队成员并行开发和维护。 